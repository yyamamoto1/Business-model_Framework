# アジャイル・ユーザーストーリー開発テンプレート
**AI Engineer #9 + AI Test Engineer #10 担当領域**

## 🎯 開発・テスト統合目標
- **要件の明確化**: ビジネス価値と技術要件の整合
- **テスト駆動開発**: 受け入れ基準の自動テスト化
- **継続的フィードバック**: ステークホルダーとの密な協働

## 📝 ユーザーストーリー構造

### 基本フォーマット (INVEST原則準拠)
**As a** [ペルソナ・ロール名],  
**I want to** [実現したい機能・行動],  
**so that** [得られる価値・メリット].

### ストーリー属性
- **Story ID**: US-[プロジェクト]-[番号] (例: US-BMF-001)
- **Epic**: [関連する大機能名]
- **Priority**: P0 (Critical) / P1 (High) / P2 (Medium) / P3 (Low)
- **Story Points**: [見積もり工数 1,2,3,5,8,13]
- **Sprint**: [実装予定スプリント]

---

## 🎨 詳細仕様・要件

### 機能要件 (Functional Requirements)
**主要機能**:
- [核となる機能の詳細説明]
- [サブ機能・関連機能]

**入力・出力**:
- **Input**: [データ形式・バリデーション]
- **Output**: [レスポンス・UI変化]
- **API仕様**: [エンドポイント・パラメータ]

### 非機能要件 (Non-Functional Requirements)
| 種別 | 要求水準 | 測定方法 |
|------|----------|----------|
| **性能** | レスポンス時間 <200ms | APM監視 |
| **可用性** | 99.9%稼働率 | アップタイム監視 |
| **セキュリティ** | 認証・認可必須 | セキュリティテスト |
| **ユーザビリティ** | 3クリック以内 | ユーザーテスト |
| **互換性** | モバイル・デスクトップ対応 | クロスブラウザテスト |

## ✅ 受け入れ基準 (Definition of Done)

### 機能受け入れ基準
**Given** [前提条件・初期状態],  
**When** [ユーザーアクション・トリガー],  
**Then** [期待される結果・システム応答].

#### 主要シナリオ
- [ ] **正常系**: [正常な操作フローの動作]
- [ ] **異常系**: [エラーハンドリング・バリデーション]
- [ ] **境界値**: [最小・最大値での動作確認]

#### UIUXレビューチェック
- [ ] **デザインシステム**: 既存コンポーネント活用
- [ ] **アクセシビリティ**: WCAG 2.1 AA準拠
- [ ] **レスポンシブ**: モバイル・タブレット対応
- [ ] **多言語**: 国際化対応（i18n）

### 技術的受け入れ基準
#### コード品質
- [ ] **単体テスト**: カバレッジ80%以上
- [ ] **統合テスト**: API・DB連携正常動作
- [ ] **E2Eテスト**: ユーザーフロー完全動作
- [ ] **コードレビュー**: 2名以上の承認完了

#### セキュリティ・パフォーマンス
- [ ] **脆弱性スキャン**: OWASP Top10対策完了
- [ ] **パフォーマンステスト**: 目標値クリア
- [ ] **ログ出力**: 適切なログレベル・フォーマット
- [ ] **監視設定**: メトリクス・アラート設定

## 🧪 テスト戦略・自動化

### テストケース設計
```gherkin
Feature: [機能名]
  As a [ペルソナ]
  I want to [アクション]
  So that [価値]

  Background:
    Given [共通前提条件]

  Scenario: [正常系テストケース]
    Given [前提条件]
    When [アクション]
    Then [期待結果]

  Scenario Outline: [データ駆動テスト]
    Given [前提条件]
    When [アクション] with "<parameter>"
    Then [期待結果] "<expected>"
    
    Examples:
      | parameter | expected |
      | value1    | result1  |
      | value2    | result2  |
```

### 自動テスト実装計画
| テスト種別 | フレームワーク | 実装担当 | 実行タイミング |
|-----------|---------------|----------|---------------|
| **Unit Test** | Vitest/Jest | 開発者 | PR作成時 |
| **Integration Test** | Supertest | 開発者 | CI/CD |
| **E2E Test** | Playwright | QA/開発者 | 夜間バッチ |
| **Visual Regression** | Percy/Chromatic | QA | PR/リリース前 |

## 📊 進捗・品質管理

### ストーリー進捗状況
- **Status**: 
  - [ ] Backlog (未着手)
  - [ ] In Progress (開発中)
  - [ ] Code Review (レビュー中)
  - [ ] Testing (テスト中)
  - [ ] Done (完了)

### 品質メトリクス
| 指標 | 目標値 | 現在値 | ステータス |
|------|--------|--------|-----------|
| **Bug発生率** | <5% | __% | 🟢🟡🔴 |
| **テストカバレッジ** | >80% | __% | 🟢🟡🔴 |
| **レビュー指摘数** | <5件 | __件 | 🟢🟡🔴 |
| **パフォーマンス** | <200ms | __ms | 🟢🟡🔴 |

## 🔄 フィードバック・改善

### ステークホルダー・レビュー
- **Product Owner**: [機能要件・ビジネス価値確認]
- **UX Designer**: [デザイン・ユーザビリティ確認]
- **Tech Lead**: [技術仕様・アーキテクチャ適合性]
- **QA Engineer**: [テスト計画・品質基準]

### 継続的改善
- **Sprint Retrospective**: [学び・改善点]
- **技術的負債**: [リファクタリング計画]
- **パフォーマンス改善**: [最適化施策]

## 📋 関連資料・依存関係

### 設計資料
- **API仕様書**: [Swagger/OpenAPI URL]
- **データベース設計**: [ER図・スキーマ]
- **UI/UXデザイン**: [Figma/Sketch URL]
- **システム構成図**: [アーキテクチャ図]

### 依存関係・前提条件
- **前提ストーリー**: [完了必須のストーリー]
- **外部API**: [連携サービス・データ]
- **インフラ**: [必要なリソース・環境]

---
💡 **AI Engineer + AI Test Engineer による開発支援**
- 要件から自動テストケース生成
- コード実装の品質チェック・最適化提案
- CI/CD パイプライン自動設定・監視
